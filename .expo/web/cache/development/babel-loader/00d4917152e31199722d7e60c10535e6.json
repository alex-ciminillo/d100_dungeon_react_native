{"ast":null,"code":"\"use strict\";\n\n{}\nwindow.teal = {};\nwindow.$t = window.teal;\n\nteal.copyto = function (obj, res) {\n  if (obj == null || typeof obj !== 'object') return obj;\n\n  if (obj instanceof Array) {\n    for (var i = obj.length - 1; i >= 0; --i) {\n      res[i] = $t.copy(obj[i]);\n    }\n  } else {\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) res[i] = $t.copy(obj[i]);\n    }\n  }\n\n  return res;\n};\n\nteal.copy = function (obj) {\n  if (!obj) return obj;\n  return teal.copyto(obj, new obj.constructor());\n};\n\nteal.element = function (name, props, place, content) {\n  var dom = document.createElement(name);\n  if (props) for (var i in props) {\n    dom.setAttribute(i, props[i]);\n  }\n  if (place) place.appendChild(dom);\n  if (content !== undefined) $t.inner(content, dom);\n  return dom;\n};\n\nteal.inner = function (obj, sel) {\n  sel.appendChild(obj.nodeName != undefined ? obj : document.createTextNode(obj));\n  return sel;\n};\n\nteal.id = function (id) {\n  return document.getElementById(id);\n};\n\nteal.set = function (sel, props) {\n  for (var i in props) {\n    sel.setAttribute(i, props[i]);\n  }\n\n  return sel;\n};\n\nteal.clas = function (sel, oldclass, newclass) {\n  var oc = oldclass ? oldclass.split(/\\s+/) : [],\n      nc = newclass ? newclass.split(/\\s+/) : [],\n      classes = (sel.getAttribute('class') || '').split(/\\s+/);\n  if (!classes[0]) classes = [];\n\n  for (var i in oc) {\n    var ind = classes.indexOf(oc[i]);\n    if (ind >= 0) classes.splice(ind, 1);\n  }\n\n  for (var i in nc) {\n    if (nc[i] && classes.indexOf(nc[i]) < 0) classes.push(nc[i]);\n  }\n\n  sel.setAttribute('class', classes.join(' '));\n};\n\nteal.empty = function (sel) {\n  if (sel.childNodes) while (sel.childNodes.length) {\n    sel.removeChild(sel.firstChild);\n  }\n};\n\nteal.remove = function (sel) {\n  if (sel) {\n    if (sel.parentNode) sel.parentNode.removeChild(sel);else for (var i = sel.length - 1; i >= 0; --i) {\n      sel[i].parentNode.removeChild(sel[i]);\n    }\n  }\n};\n\nteal.bind = function (sel, eventname, func, bubble) {\n  if (!sel) return;\n\n  if (eventname.constructor === Array) {\n    for (var i in eventname) {\n      sel.addEventListener(eventname[i], func, bubble ? bubble : false);\n    }\n  } else sel.addEventListener(eventname, func, bubble ? bubble : false);\n};\n\nteal.unbind = function (sel, eventname, func, bubble) {\n  if (eventname.constructor === Array) {\n    for (var i in eventname) {\n      sel.removeEventListener(eventname[i], func, bubble ? bubble : false);\n    }\n  } else sel.removeEventListener(eventname, func, bubble ? bubble : false);\n};\n\nteal.one = function (sel, eventname, func, bubble) {\n  var one_func = function one_func(e) {\n    func.call(this, e);\n    teal.unbind(sel, eventname, one_func, bubble);\n  };\n\n  teal.bind(sel, eventname, one_func, bubble);\n};\n\nteal.raise_event = function (sel, eventname, bubble, cancelable) {\n  var evt = document.createEvent('UIEvents');\n  evt.initEvent(eventname, bubble == undefined ? true : bubble, cancelable == undefined ? true : cancelable);\n  sel.dispatchEvent(evt);\n};\n\nteal.raise = function (sel, eventname, params, bubble, cancelable) {\n  var ev = document.createEvent(\"CustomEvent\");\n  ev.initCustomEvent(eventname, bubble, cancelable, params);\n  sel.dispatchEvent(ev);\n};\n\nif (!document.getElementsByClassName) {\n  teal.get_elements_by_class = function (classes, node) {\n    var node = node || document,\n        list = node.getElementsByTagName('*'),\n        cl = classes.split(/\\s+/),\n        result = [];\n\n    for (var i = list.length - 1; i >= 0; --i) {\n      for (var j = cl.length - 1; j >= 0; --j) {\n        var clas = list[i].getAttribute('class');\n\n        if (clas && clas.search('\\\\b' + cl[j] + '\\\\b') != -1) {\n          result.push(list[i]);\n          break;\n        }\n      }\n    }\n\n    return result;\n  };\n} else {\n  teal.get_elements_by_class = function (classes, node) {\n    return (node || document).getElementsByClassName(classes);\n  };\n}\n\nteal.rpc = function (params, callback, noparse) {\n  var ajax = new XMLHttpRequest();\n  ajax.open(\"post\", 'f', true);\n\n  ajax.onreadystatechange = function () {\n    if (ajax.readyState == 4) callback.call(ajax, noparse ? ajax.responseText : JSON.parse(ajax.responseText));\n  };\n\n  ajax.send(JSON.stringify(params));\n};\n\nteal.uuid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n};\n\nteal.get_url_params = function () {\n  var params = window.location.search.substring(1).split(\"&\");\n  var res = {};\n\n  for (var i in params) {\n    var keyvalue = params[i].split(\"=\");\n    res[keyvalue[0]] = decodeURI(keyvalue[1]);\n  }\n\n  return res;\n};\n\nteal.get_mouse_coords = function (ev) {\n  var touches = ev.changedTouches;\n  if (touches) return {\n    x: touches[0].clientX,\n    y: touches[0].clientY\n  };\n  return {\n    x: ev.clientX,\n    y: ev.clientY\n  };\n};\n\nteal.deferred = function () {\n  var solved = false,\n      callbacks = [],\n      args = [];\n\n  function solve() {\n    while (callbacks.length) {\n      callbacks.shift().apply(this, args);\n    }\n  }\n\n  return {\n    promise: function promise() {\n      return {\n        then: function then(callback) {\n          var deferred = teal.deferred(),\n              promise = deferred.promise();\n          callbacks.push(function () {\n            var res = callback.apply(this, arguments);\n            if (res && 'done' in res) res.done(deferred.resolve);else deferred.resolve.apply(this, arguments);\n          });\n          return promise;\n        },\n        done: function done(callback) {\n          callbacks.push(callback);\n          if (solved) solve();\n          return this;\n        },\n        cancel: function cancel() {\n          callbacks = [];\n        }\n      };\n    },\n    resolve: function resolve() {\n      solved = true;\n      args = Array.prototype.slice.call(arguments, 0);\n      solve();\n    }\n  };\n};\n\nteal.when = function (promises) {\n  var deferred = teal.deferred();\n  var count = promises.length,\n      ind = 0;\n  if (count == 0) deferred.resolve();\n\n  for (var i = 0; i < count; ++i) {\n    promises[i].done(function () {\n      if (++ind == count) deferred.resolve();\n    });\n  }\n\n  return deferred.promise();\n};\n\nexport default function dice_initialize(container) {\n  $t.remove($t.id('loading_text'));\n  var canvas = $t.id('canvas');\n  canvas.style.width = window.innerWidth - 1 + 'px';\n  canvas.style.height = window.innerHeight - 1 + 'px';\n  var label = $t.id('label');\n  var set = $t.id('set');\n  var selector_div = $t.id('selector_div');\n  var info_div = $t.id('info_div');\n  on_set_change();\n  $t.dice.use_true_random = false;\n\n  function on_set_change(ev) {\n    set.style.width = set.value.length + 3 + 'ex';\n  }\n\n  $t.bind(set, 'keyup', on_set_change);\n  $t.bind(set, 'mousedown', function (ev) {\n    ev.stopPropagation();\n  });\n  $t.bind(set, 'mouseup', function (ev) {\n    ev.stopPropagation();\n  });\n  $t.bind(set, 'focus', function (ev) {\n    $t.set(container, {\n      class: ''\n    });\n  });\n  $t.bind(set, 'blur', function (ev) {\n    $t.set(container, {\n      class: 'noselect'\n    });\n  });\n  $t.bind($t.id('clear'), ['mouseup', 'touchend'], function (ev) {\n    ev.stopPropagation();\n    set.value = '0';\n    on_set_change();\n  });\n  var params = $t.get_url_params();\n\n  if (params.chromakey) {\n    $t.dice.desk_color = 0x00ff00;\n    info_div.style.display = 'none';\n    $t.id('control_panel').style.display = 'none';\n  }\n\n  if (params.shadows == 0) {\n    $t.dice.use_shadows = false;\n  }\n\n  if (params.color == 'white') {\n    $t.dice.dice_color = '#808080';\n    $t.dice.label_color = '#202020';\n  }\n\n  var box = new $t.dice.dice_box(canvas, {\n    w: 500,\n    h: 300\n  });\n  box.animate_selector = false;\n  $t.bind(window, 'resize', function () {\n    canvas.style.width = window.innerWidth - 1 + 'px';\n    canvas.style.height = window.innerHeight - 1 + 'px';\n    box.reinit(canvas, {\n      w: 500,\n      h: 300\n    });\n  });\n\n  function show_selector() {\n    info_div.style.display = 'none';\n    selector_div.style.display = 'inline-block';\n    box.draw_selector();\n  }\n\n  function before_roll(vectors, notation, callback) {\n    info_div.style.display = 'none';\n    selector_div.style.display = 'none';\n    callback();\n  }\n\n  function notation_getter() {\n    return $t.dice.parse_notation(set.value);\n  }\n\n  function after_roll(notation, result) {\n    if (params.chromakey || params.noresult) return;\n    var res = result.join(' ');\n\n    if (notation.constant) {\n      if (notation.constant > 0) res += ' +' + notation.constant;else res += ' -' + Math.abs(notation.constant);\n    }\n\n    if (result.length > 1) res += ' = ' + (result.reduce(function (s, a) {\n      return s + a;\n    }) + notation.constant);\n    label.innerHTML = res;\n    info_div.style.display = 'inline-block';\n  }\n\n  box.bind_mouse(container, notation_getter, before_roll, after_roll);\n  box.bind_throw($t.id('throw'), notation_getter, before_roll, after_roll);\n  $t.bind(container, ['mouseup', 'touchend'], function (ev) {\n    ev.stopPropagation();\n\n    if (selector_div.style.display == 'none') {\n      if (!box.rolling) show_selector();\n      box.rolling = false;\n      return;\n    }\n\n    var name = box.search_dice_by_mouse(ev);\n\n    if (name != undefined) {\n      var notation = $t.dice.parse_notation(set.value);\n      notation.set.push(name);\n      set.value = $t.dice.stringify_notation(notation);\n      on_set_change();\n    }\n  });\n\n  if (params.notation) {\n    set.value = params.notation;\n  }\n\n  if (params.roll) {\n    $t.raise_event($t.id('throw'), 'mouseup');\n  } else {\n    show_selector();\n  }\n}","map":{"version":3,"names":["window","teal","$t","copyto","obj","res","Array","i","length","copy","hasOwnProperty","constructor","element","name","props","place","content","dom","document","createElement","setAttribute","appendChild","undefined","inner","sel","nodeName","createTextNode","id","getElementById","set","clas","oldclass","newclass","oc","split","nc","classes","getAttribute","ind","indexOf","splice","push","join","empty","childNodes","removeChild","firstChild","remove","parentNode","bind","eventname","func","bubble","addEventListener","unbind","removeEventListener","one","one_func","e","call","raise_event","cancelable","evt","createEvent","initEvent","dispatchEvent","raise","params","ev","initCustomEvent","getElementsByClassName","get_elements_by_class","node","list","getElementsByTagName","cl","result","j","search","rpc","callback","noparse","ajax","XMLHttpRequest","open","onreadystatechange","readyState","responseText","JSON","parse","send","stringify","uuid","replace","c","r","Math","random","v","toString","get_url_params","location","substring","keyvalue","decodeURI","get_mouse_coords","touches","changedTouches","x","clientX","y","clientY","deferred","solved","callbacks","args","solve","shift","apply","promise","then","arguments","done","resolve","cancel","prototype","slice","when","promises","count","dice_initialize","container","canvas","style","width","innerWidth","height","innerHeight","label","selector_div","info_div","on_set_change","dice","use_true_random","value","stopPropagation","class","chromakey","desk_color","display","shadows","use_shadows","color","dice_color","label_color","box","dice_box","w","h","animate_selector","reinit","show_selector","draw_selector","before_roll","vectors","notation","notation_getter","parse_notation","after_roll","noresult","constant","abs","reduce","s","a","innerHTML","bind_mouse","bind_throw","rolling","search_dice_by_mouse","stringify_notation","roll"],"sources":["/home/alex/react-dice/dice/main.js"],"sourcesContent":["\"use strict\";\r\n\r\n{/* <script type=\"text/javascript\" src=\"../teal.js\"></script>\r\n<script type=\"text/javascript\" src=\"dice.js\"></script>\r\n<script type=\"text/javascript\" src=\"main.js\"></script> */}\r\n\r\nwindow.teal = {};\r\nwindow.$t = window.teal;\r\n\r\nteal.copyto = function(obj, res) {\r\n    if (obj == null || typeof obj !== 'object') return obj;\r\n    if (obj instanceof Array) {\r\n        for (var i = obj.length - 1; i >= 0; --i)\r\n            res[i] = $t.copy(obj[i]);\r\n    }\r\n    else {\r\n        for (var i in obj) {\r\n            if (obj.hasOwnProperty(i))\r\n                res[i] = $t.copy(obj[i]);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n\r\nteal.copy = function(obj) {\r\n    if (!obj) return obj;\r\n    return teal.copyto(obj, new obj.constructor());\r\n}\r\n\r\nteal.element = function(name, props, place, content) {\r\n    var dom = document.createElement(name);\r\n    if (props) for (var i in props) dom.setAttribute(i, props[i]);\r\n    if (place) place.appendChild(dom);\r\n    if (content !== undefined) $t.inner(content, dom);\r\n    return dom;\r\n}\r\n\r\nteal.inner = function(obj, sel) {\r\n    sel.appendChild(obj.nodeName != undefined ? obj : document.createTextNode(obj));\r\n    return sel;\r\n}\r\n\r\nteal.id = function(id) {\r\n    return document.getElementById(id);\r\n}\r\n\r\nteal.set = function(sel, props) {\r\n    for (var i in props) sel.setAttribute(i, props[i]);\r\n    return sel;\r\n}\r\n\r\nteal.clas = function(sel, oldclass, newclass) {\r\n    var oc = oldclass ? oldclass.split(/\\s+/) : [],\r\n        nc = newclass ? newclass.split(/\\s+/) : [],\r\n        classes = (sel.getAttribute('class') || '').split(/\\s+/);\r\n    if (!classes[0]) classes = [];\r\n    for (var i in oc) {\r\n        var ind = classes.indexOf(oc[i]);\r\n        if (ind >= 0) classes.splice(ind, 1);\r\n    }\r\n    for (var i in nc) {\r\n        if (nc[i] && classes.indexOf(nc[i]) < 0) classes.push(nc[i]);\r\n    }\r\n    sel.setAttribute('class', classes.join(' '));\r\n}\r\n\r\nteal.empty = function(sel) {\r\n    if (sel.childNodes)\r\n        while (sel.childNodes.length)\r\n            sel.removeChild(sel.firstChild);\r\n}\r\n\r\nteal.remove = function(sel) {\r\n    if (sel) {\r\n        if (sel.parentNode) sel.parentNode.removeChild(sel);\r\n        else for (var i = sel.length - 1; i >= 0; --i)\r\n            sel[i].parentNode.removeChild(sel[i]);\r\n    }\r\n}\r\n\r\nteal.bind = function(sel, eventname, func, bubble) {\r\n    if (!sel) return;\r\n    if (eventname.constructor === Array) {\r\n        for (var i in eventname)\r\n            sel.addEventListener(eventname[i], func, bubble ? bubble : false);\r\n    }\r\n    else\r\n        sel.addEventListener(eventname, func, bubble ? bubble : false);\r\n}\r\n\r\nteal.unbind = function(sel, eventname, func, bubble) {\r\n    if (eventname.constructor === Array) {\r\n        for (var i in eventname)\r\n            sel.removeEventListener(eventname[i], func, bubble ? bubble : false);\r\n    }\r\n    else\r\n        sel.removeEventListener(eventname, func, bubble ? bubble : false);\r\n}\r\n\r\nteal.one = function(sel, eventname, func, bubble) {\r\n    var one_func = function(e) {\r\n        func.call(this, e);\r\n        teal.unbind(sel, eventname, one_func, bubble);\r\n    };\r\n    teal.bind(sel, eventname, one_func, bubble);\r\n}\r\n\r\nteal.raise_event = function(sel, eventname, bubble, cancelable) {\r\n    var evt = document.createEvent('UIEvents');\r\n    evt.initEvent(eventname, bubble == undefined ? true : bubble,\r\n            cancelable == undefined ? true : cancelable);\r\n    sel.dispatchEvent(evt);\r\n}\r\n\r\nteal.raise = function(sel, eventname, params, bubble, cancelable) {\r\n    var ev = document.createEvent(\"CustomEvent\");\r\n    ev.initCustomEvent(eventname, bubble, cancelable, params);\r\n    sel.dispatchEvent(ev);\r\n}\r\n\r\nif (!document.getElementsByClassName) {\r\n    teal.get_elements_by_class = function(classes, node) {\r\n        var node = node || document,\r\n            list = node.getElementsByTagName('*'),\r\n            cl = classes.split(/\\s+/),\r\n            result = [];\r\n\r\n        for (var i = list.length - 1; i >= 0; --i) {\r\n            for (var j = cl.length - 1; j >= 0; --j) {\r\n                var clas = list[i].getAttribute('class');\r\n                if (clas && clas.search('\\\\b' + cl[j] + '\\\\b') != -1) {\r\n                    result.push(list[i]);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\nelse {\r\n    teal.get_elements_by_class = function(classes, node) {\r\n        return (node || document).getElementsByClassName(classes);\r\n    }\r\n}\r\n\r\nteal.rpc = function(params, callback, noparse) {\r\n    var ajax = new XMLHttpRequest();\r\n    ajax.open(\"post\", 'f', true);\r\n    ajax.onreadystatechange = function() {\r\n        if (ajax.readyState == 4)\r\n            callback.call(ajax, noparse ? ajax.responseText : JSON.parse(ajax.responseText));\r\n    };\r\n    ajax.send(JSON.stringify(params));\r\n}\r\n\r\nteal.uuid = function() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\nteal.get_url_params = function() {\r\n    var params = window.location.search.substring(1).split(\"&\");\r\n    var res = {};\r\n    for (var i in params) {\r\n        var keyvalue = params[i].split(\"=\");\r\n        res[keyvalue[0]] = decodeURI(keyvalue[1]);\r\n    }\r\n    return res;\r\n}\r\n\r\nteal.get_mouse_coords = function(ev) {\r\n    var touches = ev.changedTouches;\r\n    if (touches) return { x: touches[0].clientX, y: touches[0].clientY };\r\n    return { x: ev.clientX, y: ev.clientY };\r\n}\r\n\r\nteal.deferred = function() {\r\n    var solved = false, callbacks = [], args = [];\r\n    function solve() {\r\n        while (callbacks.length) {\r\n            callbacks.shift().apply(this, args);\r\n        }\r\n    }\r\n    return {\r\n        promise: function() {\r\n            return {\r\n                then: function(callback) {\r\n                    var deferred = teal.deferred(), promise = deferred.promise();\r\n                    callbacks.push(function() { \r\n                        var res = callback.apply(this, arguments);\r\n                        if (res && 'done' in res) res.done(deferred.resolve);\r\n                        else deferred.resolve.apply(this, arguments); \r\n                    });\r\n                    return promise;\r\n                },\r\n                done: function(callback) {\r\n                    callbacks.push(callback);\r\n                    if (solved) solve();\r\n                    return this;\r\n                },\r\n                cancel: function() {\r\n                    callbacks = [];\r\n                }\r\n            };\r\n        },\r\n        resolve: function() {\r\n            solved = true;\r\n            args = Array.prototype.slice.call(arguments, 0);\r\n            solve();\r\n        }\r\n    };\r\n}\r\n\r\nteal.when = function(promises) {\r\n    var deferred = teal.deferred();\r\n    var count = promises.length, ind = 0;\r\n    if (count == 0) deferred.resolve();\r\n    for (var i = 0; i < count; ++i) {\r\n        promises[i].done(function() {\r\n            if (++ind == count) deferred.resolve();\r\n        });\r\n    }\r\n    return deferred.promise();\r\n}\r\n\r\n\r\nexport default function dice_initialize(container) {\r\n    $t.remove($t.id('loading_text'));\r\n\r\n    var canvas = $t.id('canvas');\r\n    canvas.style.width = window.innerWidth - 1 + 'px';\r\n    canvas.style.height = window.innerHeight - 1 + 'px';\r\n    var label = $t.id('label');\r\n    var set = $t.id('set');\r\n    var selector_div = $t.id('selector_div');\r\n    var info_div = $t.id('info_div');\r\n    on_set_change();\r\n\r\n    $t.dice.use_true_random = false;\r\n\r\n    function on_set_change(ev) { set.style.width = set.value.length + 3 + 'ex'; }\r\n    $t.bind(set, 'keyup', on_set_change);\r\n    $t.bind(set, 'mousedown', function(ev) { ev.stopPropagation(); });\r\n    $t.bind(set, 'mouseup', function(ev) { ev.stopPropagation(); });\r\n    $t.bind(set, 'focus', function(ev) { $t.set(container, { class: '' }); });\r\n    $t.bind(set, 'blur', function(ev) { $t.set(container, { class: 'noselect' }); });\r\n\r\n    $t.bind($t.id('clear'), ['mouseup', 'touchend'], function(ev) {\r\n        ev.stopPropagation();\r\n        set.value = '0';\r\n        on_set_change();\r\n    });\r\n\r\n    var params = $t.get_url_params();\r\n\r\n    if (params.chromakey) {\r\n        $t.dice.desk_color = 0x00ff00;\r\n        info_div.style.display = 'none';\r\n        $t.id('control_panel').style.display = 'none';\r\n    }\r\n    if (params.shadows == 0) {\r\n        $t.dice.use_shadows = false;\r\n    }\r\n    if (params.color == 'white') {\r\n        $t.dice.dice_color = '#808080';\r\n        $t.dice.label_color = '#202020';\r\n    }\r\n\r\n    var box = new $t.dice.dice_box(canvas, { w: 500, h: 300 });\r\n    box.animate_selector = false;\r\n\r\n    $t.bind(window, 'resize', function() {\r\n        canvas.style.width = window.innerWidth - 1 + 'px';\r\n        canvas.style.height = window.innerHeight - 1 + 'px';\r\n        box.reinit(canvas, { w: 500, h: 300 });\r\n    });\r\n\r\n    function show_selector() {\r\n        info_div.style.display = 'none';\r\n        selector_div.style.display = 'inline-block';\r\n        box.draw_selector();\r\n    }\r\n\r\n    function before_roll(vectors, notation, callback) {\r\n        info_div.style.display = 'none';\r\n        selector_div.style.display = 'none';\r\n        // do here rpc call or whatever to get your own result of throw.\r\n        // then callback with array of your result, example:\r\n        // callback([2, 2, 2, 2]); // for 4d6 where all dice values are 2.\r\n        callback();\r\n    }\r\n\r\n    function notation_getter() {\r\n        return $t.dice.parse_notation(set.value);\r\n    }\r\n\r\n    function after_roll(notation, result) {\r\n        if (params.chromakey || params.noresult) return;\r\n        var res = result.join(' ');\r\n        if (notation.constant) {\r\n            if (notation.constant > 0) res += ' +' + notation.constant;\r\n            else res += ' -' + Math.abs(notation.constant);\r\n        }\r\n        if (result.length > 1) res += ' = ' + \r\n                (result.reduce(function(s, a) { return s + a; }) + notation.constant);\r\n        label.innerHTML = res;\r\n        info_div.style.display = 'inline-block';\r\n    }\r\n\r\n    box.bind_mouse(container, notation_getter, before_roll, after_roll);\r\n    box.bind_throw($t.id('throw'), notation_getter, before_roll, after_roll);\r\n\r\n    $t.bind(container, ['mouseup', 'touchend'], function(ev) {\r\n        ev.stopPropagation();\r\n        if (selector_div.style.display == 'none') {\r\n            if (!box.rolling) show_selector();\r\n            box.rolling = false;\r\n            return;\r\n        }\r\n        var name = box.search_dice_by_mouse(ev);\r\n        if (name != undefined) {\r\n            var notation = $t.dice.parse_notation(set.value);\r\n            notation.set.push(name);\r\n            set.value = $t.dice.stringify_notation(notation);\r\n            on_set_change();\r\n        }\r\n    });\r\n\r\n    if (params.notation) {\r\n        set.value = params.notation;\r\n    }\r\n    if (params.roll) {\r\n        $t.raise_event($t.id('throw'), 'mouseup');\r\n    }\r\n    else {\r\n        show_selector();\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}